{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@foskym/flarum-oauth-center/webpack/bootstrap","webpack://@foskym/flarum-oauth-center/webpack/runtime/compat get default export","webpack://@foskym/flarum-oauth-center/webpack/runtime/define property getters","webpack://@foskym/flarum-oauth-center/webpack/runtime/hasOwnProperty shorthand","webpack://@foskym/flarum-oauth-center/webpack/runtime/make namespace object","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/extenders']\"","webpack://@foskym/flarum-oauth-center/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@foskym/flarum-oauth-center/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/Model']\"","webpack://@foskym/flarum-oauth-center/./src/common/models/Client.js","webpack://@foskym/flarum-oauth-center/./src/common/models/Scope.js","webpack://@foskym/flarum-oauth-center/./src/common/models/Record.js","webpack://@foskym/flarum-oauth-center/./src/common/models/Token.js","webpack://@foskym/flarum-oauth-center/./src/common/extend.js","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['forum/app']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/extend']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@foskym/flarum-oauth-center/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/Page']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/Button']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/Component']\"","webpack://@foskym/flarum-oauth-center/./src/forum/components/ScopeComponent.js","webpack://@foskym/flarum-oauth-center/./src/forum/components/oauth/AuthorizePage.js","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@foskym/flarum-oauth-center/./src/forum/components/user/AuthorizedPage.js","webpack://@foskym/flarum-oauth-center/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class Client extends Model {\n  client_id = Model.attribute('client_id');\n  client_secret = Model.attribute('client_secret');\n  redirect_uri = Model.attribute('redirect_uri');\n  grant_types = Model.attribute('grant_types');\n  scope = Model.attribute('scope');\n  user_id = Model.attribute('user_id');\n  client_name = Model.attribute('client_name');\n  client_icon = Model.attribute('client_icon');\n  client_desc = Model.attribute('client_desc');\n  client_home = Model.attribute('client_home');\n}\n","import Model from 'flarum/common/Model';\n\nexport default class Scope extends Model {\n  scope = Model.attribute('scope');\n  resource_path = Model.attribute('resource_path');\n  method = Model.attribute('method');\n  visible_fields = Model.attribute('visible_fields');\n  is_default = Model.attribute('is_default');\n  scope_name = Model.attribute('scope_name');\n  scope_icon = Model.attribute('scope_icon');\n  scope_desc = Model.attribute('scope_desc');\n}\n","import Model from 'flarum/common/Model';\n\nexport default class Record extends Model {\n  client = Model.hasOne('client');\n  user_id = Model.attribute('user_id');\n  authorized_at = Model.attribute('authorized_at', Model.transformDate);\n}\n","import Model from 'flarum/common/Model';\n\nexport default class Token extends Model {\n  access_token = Model.attribute('access_token');\n  client_id = Model.attribute('client_id');\n  user_id = Model.attribute('user_id');\n  expires = Model.attribute('expires', Model.transformDate);\n  scope = Model.attribute('scope');\n}\n","import Extend from 'flarum/common/extenders';\nimport Client from \"./models/Client\";\nimport Scope from \"./models/Scope\";\nimport Record from \"./models/Record\";\nimport Token from \"./models/Token\";\n\nexport default [\n  new Extend.Store()\n    .add('oauth-clients', Client)\n    .add('oauth-scopes', Scope)\n    .add('oauth-records', Record)\n    .add('oauth-tokens', Token)\n];\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Tooltip from 'flarum/common/components/Tooltip';\n\nexport default class ScopeComponent extends Component {\n  view() {\n    const { scope, client } = this.attrs;\n    return (\n      <div class=\"oauth-scope\">\n        <div class=\"oauth-scope-left\">\n          {\n            (scope.scope_icon().indexOf('fa-') > -1) ?\n              <i class={\"oauth-scope-object fa-2x \" + scope.scope_icon()}\n                 style=\"margin-left:2px;\"></i> :\n              <img class=\"oauth-scope-object\" src={scope.scope_icon()} style=\"width:32px\"/>\n          }\n        </div>\n        <div class=\"oauth-scope-body\">\n          <h6 class=\"oauth-scope-heading\">\n            {scope.scope_name()}\n          </h6>\n          <small>\n            {\n              scope.scope_desc()\n                .replace('{client_name}', client.client_name())\n                .replace('{user}', app.session.user.attribute('displayName'))\n            }\n          </small>\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport {extend} from 'flarum/common/extend';\nimport Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport extractText from 'flarum/common/utils/extractText';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport avatar from 'flarum/common/helpers/avatar';\n\nimport ScopeComponent from '../ScopeComponent';\n\nexport default class AuthorizePage extends IndexPage {\n  params = [];\n  client = null;\n  scopes = null;\n  client_scope = [];\n  loading = true;\n  is_authorized = false;\n  submit_loading = false;\n  display_mode = 'box';\n\n  oninit(vnode) {\n    super.oninit(vnode);\n    if (!app.session.user) {\n      setTimeout(() => app.modal.show(LogInModal), 500);\n    }\n\n    this.display_mode = app.forum.attribute('foskym-oauth-center.display_mode') || 'box';\n\n    const params = m.route.param();\n\n    if (params.client_id == null || params.response_type == null || params.redirect_uri == null) {\n      m.route.set('/');\n      return;\n    }\n\n    this.params = params;\n\n    Promise.all([\n      app.store.find('oauth-clients', params.client_id),\n      app.store.find('oauth-scopes')\n    ]).then(([client, scopes]) => {\n      if (!client) {\n        m.route.set('/');\n        return;\n      }\n\n      this.client = client;\n      this.scopes = scopes;\n\n      let uris = this.client.redirect_uri().split(' ');\n\n      if (app.forum.attribute('foskym-oauth-center.require_exact_redirect_uri') && !uris.includes(params.redirect_uri)) {\n        m.route.set('/');\n        return;\n      }\n\n      if (!app.forum.attribute('foskym-oauth-center.allow_implicit') && params.response_type === 'token') {\n        m.route.set('/');\n        return;\n      }\n\n      if (app.forum.attribute('foskym-oauth-center.enforce_state') && params.state == null) {\n        m.route.set('/');\n        return;\n      }\n\n      let scopes_temp = params.scope ? params.scope.split(' ') : (this.client.scope() || '').split(' ');\n\n      let default_scopes = this.scopes.filter(scope => scope.is_default() === 1).map(scope => scope.scope());\n\n      this.client_scope = scopes_temp.filter((scope, index) => scopes_temp.indexOf(scope) === index);\n      this.client_scope = this.client_scope.concat(default_scopes).filter(scope => scope !== '');\n\n      this.loading = false;\n      m.redraw();\n    });\n  }\n\n  setTitle() {\n    app.setTitle(extractText(app.translator.trans('foskym-oauth-center.forum.page.title.authorize')));\n    app.setTitleCount(0);\n  }\n\n  view() {\n    if (!this.client || this.loading) {\n      return <LoadingIndicator/>;\n    }\n    return (\n      <div className=\"AuthorizePage\">\n        <div className=\"container\">\n          <div class=\"oauth-area\">\n            <div class={'oauth-main oauth-' + this.display_mode}>\n              <div class=\"oauth-header\">\n                <h2>{app.forum.attribute('title')}</h2>\n                <p>\n                  {app.translator.trans('foskym-oauth-center.forum.authorize.access')} <Tooltip text={this.client.client_desc()} position=\"bottom\">\n                    <a href={this.client.client_home()} target=\"_blank\">{this.client.client_name()}</a>\n                  </Tooltip>\n                </p>\n\n              </div>\n              <div class=\"oauth-body\">\n\n                <div class=\"oauth-user\">\n                  {avatar(app.session.user, {className: 'oauth-avatar'})}\n                  <div class=\"oauth-username\">\n                    <b>{app.session.user.username()}</b>\n                    <span>{app.session.user.displayName()}</span>\n                  </div>\n                </div>\n\n                <div class=\"oauth-info\">\n                  <Tooltip text={app.forum.attribute('title')}>\n                    <img src={app.forum.attribute('faviconUrl')} alt=\"favicon\"/>\n                  </Tooltip>\n                  <i class=\"fas fa-exchange-alt fa-2x\"></i>\n                  <Tooltip text={this.client.client_desc()}>\n                    <img src={this.client.client_icon()} alt=\"client_icon\"/>\n                  </Tooltip>\n                  <span>{this.client.client_name()}</span>\n                </div>\n                <div class=\"oauth-scope-area\">\n                  <h3>{app.translator.trans('foskym-oauth-center.forum.authorize.require_these_scopes')}</h3>\n                  {\n                    this.client_scope\n                      .filter(scope => scope)\n                      .map(scope => {\n                        let scope_info = this.scopes.find(s => s.scope() === scope);\n                        return scope_info && <ScopeComponent scope={scope_info} client={this.client} />;\n                      })\n                  }\n                </div>\n                <form class=\"oauth-form\" method=\"post\" id=\"form\" action=\"/oauth/authorize\" onsubmit={this.onsubmit.bind(this)}>\n                  {Object.keys(this.params).map(key => (\n                    <input type=\"hidden\" name={key} value={this.params[key]} />\n                  ))}\n                  <input type=\"hidden\" name=\"is_authorized\" value={this.is_authorized}/>\n                  <div class=\"oauth-form-item oauth-btn-group\">\n                    <Button className=\"Button\" type=\"submit\" style=\"width: 50%;\" onclick={this.deny.bind(this)}\n                            loading={this.submit_loading}>\n                      {app.translator.trans('foskym-oauth-center.forum.authorize.deny')}\n                    </Button>\n                    <Button className=\"Button Button--primary\" type=\"submit\" style=\"width: 50%;\"\n                            onclick={this.agree.bind(this)} loading={this.submit_loading}>\n                      {app.translator.trans('foskym-oauth-center.forum.authorize.agree')}\n                    </Button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  deny(e) {\n    this.is_authorized = false;\n  }\n  agree(e) {\n    this.is_authorized = true;\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n    this.submit_loading = true;\n    if (app.forum.attribute('foskym-oauth-center.authorization_method_fetch')) {\n      app.request({\n        method: 'POST',\n        url: '/oauth/authorize/fetch',\n        body: {\n          ...this.params,\n          is_authorized: this.is_authorized,\n        }\n      }).then((params) => {\n        window.location.href = params.location;\n      });\n    } else {\n      e.target.submit();\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","import app from 'flarum/forum/app';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport Button from 'flarum/common/components/Button';\n\nexport default class AuthorizedPage extends UserPage {\n  records = [];\n  loading = true;\n  nomore = false;\n  page = 0;\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loadUser(m.route.param('username'));\n    this.loadRecords();\n  }\n  loadRecords() {\n    app.store.find('oauth-records', { page: this.page }).then((records) => {\n      this.records = this.records.concat(records);\n      this.loading = false;\n      if (records.length < 10) {\n        this.nomore = true;\n      }\n      m.redraw();\n    });\n  }\n  loadMore() {\n    this.loadRecords((this.page += 1));\n  }\n  content() {\n    if (this.records.length === 0) {\n      return <Placeholder text={app.translator.trans('foskym-oauth-center.forum.authorized.no_records')} />;\n    }\n\n    let allow_delete = app.forum.attribute('foskym-oauth-center.allow_delete_records');\n    console.log(allow_delete);\n\n    return (\n      <div className=\"AuthorizedPage\">\n        {allow_delete && (\n          <Button\n            className={'Button Button--danger'}\n            onclick={() => {\n              window.confirm(app.translator.trans('foskym-oauth-center.forum.authorized.delete_all_confirm')) &&\n                app\n                  .request({\n                    url: app.forum.attribute('apiUrl') + '/oauth-records/user',\n                    method: 'DELETE',\n                  })\n                  .then(() => {\n                    this.records = [];\n                    this.nomore = false;\n                    this.loadMore();\n                  });\n            }}\n          >\n            {app.translator.trans('foskym-oauth-center.forum.authorized.delete_all_button')}\n          </Button>\n        )}\n\n        <ul className=\"AuthorizedRecords\">\n          {this.records.map((record) => (\n            <li className=\"AuthorizedRecord\">\n              <div className=\"AuthorizedRecord-content\">\n                <div className=\"AuthorizedRecord-left\">\n                  <img className=\"AuthorizedRecord-icon\" src={record.attribute('client').client_icon} alt=\"client_icon\" />\n                  <div className=\"AuthorizedRecord-info\">\n                    <h3>\n                      <a href={record.attribute('client').client_home} target=\"_blank\">\n                        {record.attribute('client').client_name}\n                      </a>\n                    </h3>\n                    <p>{record.attribute('client').client_desc}</p>\n                  </div>\n                </div>\n                <div className=\"AuthorizedRecord-right\">\n                  <time>{record.authorized_at().toLocaleString()}</time>\n\n                  {allow_delete && (\n                    <Button\n                      className={'Button Button--danger Button--small'}\n                      onclick={() => {\n                        record.delete().then(() => {\n                          this.records = this.records.filter((r) => r !== record);\n                          m.redraw();\n                        });\n                      }}\n                    >\n                      {app.translator.trans('foskym-oauth-center.forum.authorized.delete_button')}\n                    </Button>\n                  )}\n                </div>\n              </div>\n              <hr />\n            </li>\n          ))}\n        </ul>\n\n        {this.loading && <LoadingIndicator display=\"block\" />}\n\n        {!this.loading && !this.nomore && (\n          <div style=\"text-align:center;padding:20px\">\n            <Button className={'Button Button--primary'} disabled={this.loading} loading={this.loading} onclick={() => this.loadMore()}>\n              {app.translator.trans('foskym-oauth-center.forum.authorized.load_more')}\n            </Button>\n          </div>\n        )}\n\n        {this.nomore && <Placeholder text={app.translator.trans('foskym-oauth-center.forum.authorized.no_more_records')} />}\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport {extend} from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport AuthorizePage from \"./components/oauth/AuthorizePage\";\nimport AuthorizedPage from \"./components/user/AuthorizedPage\";\napp.initializers.add('foskym/flarum-oauth-center', () => {\n  app.routes['oauth.authorize'] = {\n    path: '/oauth/authorize',\n    component: AuthorizePage\n  };\n\n  app.routes['user.authorized'] = {\n    path: '/u/:username/authorized',\n    component: AuthorizedPage\n  };\n  extend(UserPage.prototype, 'navItems', function (items) {\n    if (app.session.user && app.session.user.id() === this.user.id()) {\n      items.add(\n        'authorized',\n        LinkButton.component(\n          {\n            href: app.route('user.authorized', { username: this.user.username() }),\n            icon: 'fas fa-user-friends',\n          },\n          [\n            app.translator.trans('foskym-oauth-center.forum.page.label.authorized'),\n          ]\n        ),\n        -110\n      );\n    }\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","Client","_Model","_this","_len","arguments","length","args","Array","_key","apply","concat","client_id","Model","client_secret","redirect_uri","grant_types","scope","user_id","client_name","client_icon","client_desc","client_home","Scope","resource_path","method","visible_fields","is_default","scope_name","scope_icon","scope_desc","Record","client","authorized_at","Token","access_token","expires","Extend","add","_extends","assign","target","i","source","this","ScopeComponent","_Component","view","_this$attrs","attrs","m","class","indexOf","style","src","replace","app","user","attribute","Component","AuthorizePage","_IndexPage","params","scopes","client_scope","loading","is_authorized","submit_loading","display_mode","_proto","oninit","vnode","_this2","setTimeout","show","LogInModal","route","param","response_type","Promise","all","find","then","_ref","uris","split","includes","state","set","scopes_temp","default_scopes","filter","map","index","redraw","setTitle","extractText","trans","_this3","LoadingIndicator","className","Tooltip","text","position","href","avatar","username","displayName","alt","scope_info","s","id","action","onsubmit","keys","type","name","Button","onclick","deny","agree","e","preventDefault","url","body","window","location","submit","IndexPage","AuthorizedPage","_UserPage","records","nomore","page","loadUser","loadRecords","loadMore","content","Placeholder","allow_delete","console","log","confirm","record","toLocaleString","r","display","disabled","UserPage","path","component","extend","items","LinkButton","icon"],"sourceRoot":""}