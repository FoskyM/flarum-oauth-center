{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@foskym/flarum-oauth-center/webpack/bootstrap","webpack://@foskym/flarum-oauth-center/webpack/runtime/compat get default export","webpack://@foskym/flarum-oauth-center/webpack/runtime/define property getters","webpack://@foskym/flarum-oauth-center/webpack/runtime/hasOwnProperty shorthand","webpack://@foskym/flarum-oauth-center/webpack/runtime/make namespace object","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/extenders']\"","webpack://@foskym/flarum-oauth-center/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@foskym/flarum-oauth-center/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/Model']\"","webpack://@foskym/flarum-oauth-center/./src/common/models/Client.js","webpack://@foskym/flarum-oauth-center/./src/common/models/Scope.js","webpack://@foskym/flarum-oauth-center/./src/common/extend.js","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['forum/app']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/extend']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/Page']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/Button']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@foskym/flarum-oauth-center/external root \"flarum.core.compat['common/Component']\"","webpack://@foskym/flarum-oauth-center/./src/forum/components/ScopeComponent.js","webpack://@foskym/flarum-oauth-center/./src/forum/components/oauth/AuthorizePage.js","webpack://@foskym/flarum-oauth-center/./src/forum/components/user/AuthorizedPage.js","webpack://@foskym/flarum-oauth-center/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class Client extends Model {\n  client_id = Model.attribute('client_id');\n  client_secret = Model.attribute('client_secret');\n  redirect_uri = Model.attribute('redirect_uri');\n  grant_types = Model.attribute('grant_types');\n  scope = Model.attribute('scope');\n  user_id = Model.attribute('user_id');\n  client_name = Model.attribute('client_name');\n  client_icon = Model.attribute('client_icon');\n  client_desc = Model.attribute('client_desc');\n  client_home = Model.attribute('client_home');\n}\n","import Model from 'flarum/common/Model';\n\nexport default class Scope extends Model {\n  scope = Model.attribute('scope');\n  resource_path = Model.attribute('resource_path');\n  method = Model.attribute('method');\n  is_default = Model.attribute('is_default');\n  scope_name = Model.attribute('scope_name');\n  scope_icon = Model.attribute('scope_icon');\n  scope_desc = Model.attribute('scope_desc');\n}\n","import Extend from 'flarum/common/extenders';\nimport Client from \"./models/Client\";\nimport Scope from \"./models/Scope\";\n\nexport default [\n  new Extend.Store()\n    .add('oauth-clients', Client)\n    .add('oauth-scopes', Scope),\n];\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import app from 'flarum/forum/app';\r\nimport Component from 'flarum/common/Component';\r\nimport Tooltip from 'flarum/common/components/Tooltip';\r\n\r\nexport default class ScopeComponent extends Component {\r\n  view() {\r\n    const { scope, client } = this.attrs;\r\n    return (\r\n      <div class=\"oauth-scope\">\r\n        <div class=\"oauth-scope-left\">\r\n          {\r\n            (scope.scope_icon().indexOf('fa-') > -1) ?\r\n              <i class={\"oauth-scope-object fa-2x \" + scope.scope_icon()}\r\n                 style=\"margin-left:2px;color:#000\"></i> :\r\n              <img class=\"oauth-scope-object\" src={scope.scope_icon()} style=\"width:32px\"/>\r\n          }\r\n        </div>\r\n        <div class=\"oauth-scope-body\">\r\n          <h6 class=\"oauth-scope-heading\">\r\n            {scope.scope_name()}\r\n          </h6>\r\n          <small>\r\n            {\r\n              scope.scope_desc()\r\n                .replace('{client_name}', client.client_name())\r\n                .replace('{user}', app.session.user.attribute('displayName'))\r\n            }\r\n          </small>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import app from 'flarum/forum/app';\nimport {extend} from 'flarum/common/extend';\nimport Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport extractText from 'flarum/common/utils/extractText';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nimport ScopeComponent from '../ScopeComponent';\n\nexport default class AuthorizePage extends IndexPage {\n  params = [];\n  client = null;\n  scopes = null;\n  client_scope = [];\n  loading = true;\n  is_authorized = false;\n  submit_loading = false;\n\n  oninit(vnode) {\n    super.oninit(vnode);\n    if (!app.session.user) {\n      setTimeout(() => app.modal.show(LogInModal), 500);\n    }\n\n    const params = m.route.param();\n\n    if (params.client_id == null || params.response_type == null || params.redirect_uri == null) {\n      m.route.set('/');\n      return;\n    }\n\n    this.params = params;\n\n    Promise.all([\n      app.store.find('oauth-clients', params.client_id),\n      app.store.find('oauth-scopes')\n    ]).then(([client, scopes]) => {\n      if (client.length === 0) {\n        m.route.set('/');\n        return;\n      }\n\n      this.client = client[0];\n      this.scopes = scopes;\n\n      let uris = this.client.redirect_uri().split(' ');\n\n      if (app.forum.attribute('foskym-oauth-center.require_exact_redirect_uri') && !uris.includes(params.redirect_uri)) {\n        m.route.set('/');\n        return;\n      }\n\n      if (!app.forum.attribute('foskym-oauth-center.allow_implicit') && params.response_type === 'token') {\n        m.route.set('/');\n        return;\n      }\n\n      if (app.forum.attribute('foskym-oauth-center.enforce_state') && params.state == null) {\n        m.route.set('/');\n        return;\n      }\n\n      let scopes_temp = params.scope ? params.scope.split(' ') : (this.client.scope() || '').split(' ');\n\n      let default_scopes = this.scopes.filter(scope => scope.is_default() === 1).map(scope => scope.scope());\n\n      this.client_scope = scopes_temp.filter((scope, index) => scopes_temp.indexOf(scope) === index);\n      this.client_scope = this.client_scope.concat(default_scopes).filter(scope => scope !== '');\n\n      this.loading = false;\n      m.redraw();\n    });\n  }\n\n  setTitle() {\n    app.setTitle(extractText(app.translator.trans('foskym-oauth-center.forum.page.title.authorize')));\n    app.setTitleCount(0);\n  }\n\n  view() {\n    if (!this.client || this.loading) {\n      return <LoadingIndicator></LoadingIndicator>;\n    }\n    return (\n      <div className=\"AuthorizePage\">\n        <div className=\"container\">\n          <div class=\"oauth-area\">\n            <div class=\"oauth-main\">\n              <div class=\"oauth-box oauth-header\">\n                <h2>{app.forum.attribute('title')}</h2>\n                <p>\n                  {app.translator.trans('foskym-oauth-center.forum.authorize.access')} <a\n                  href={this.client.client_home()} target=\"_blank\">{this.client.client_name()}</a>\n                </p>\n\n              </div>\n              <div class=\"oauth-box oauth-body\">\n\n                <div class=\"oauth-top\">\n                  <img src={app.forum.attribute('faviconUrl')} alt=\"favicon\"/>\n                  <i class=\"fas fa-exchange-alt fa-2x\"></i>\n                  <Tooltip text={this.client.client_desc()}>\n                    <img src={this.client.client_icon()} alt=\"client_icon\"/>\n                  </Tooltip>\n                </div>\n                <div class=\"oauth-scope-area\">\n                  {\n                    this.client_scope\n                      .filter(scope => scope)\n                      .map(scope => {\n                        let scope_info = this.scopes.find(s => s.scope() === scope);\n                        if (scope_info == null) {\n                          return '';\n                        }\n                        return <ScopeComponent scope={scope_info} client={this.client} />;\n                      })\n                  }\n                </div>\n                <form class=\"oauth-form\" method=\"post\" id=\"form\" action=\"/oauth/authorize\" onsubmit={this.onsubmit.bind(this)}>\n                  <input type=\"hidden\" name=\"response_type\" value={this.params.response_type}/>\n                  <input type=\"hidden\" name=\"client_id\" value={this.params.client_id}/>\n                  <input type=\"hidden\" name=\"redirect_uri\"\n                         value={this.params.redirect_uri}/>\n                  <input type=\"hidden\" name=\"state\" value={this.params.state}/>\n                  <input type=\"hidden\" name=\"scope\" value={this.params.scope}/>\n                  <input type=\"hidden\" name=\"is_authorized\" value={this.is_authorized}/>\n                  <div style=\"display: flex; margin-top: 15px\" class=\"oauth-form-item\">\n                    <Button className=\"Button\" type=\"submit\" style=\"width: 50%;\" onclick={this.deny.bind(this)}\n                            loading={this.submit_loading}>\n                      {app.translator.trans('foskym-oauth-center.forum.authorize.deny')}\n                    </Button>\n                    <Button className=\"Button Button--primary\" type=\"submit\" style=\"width: 50%;\"\n                            onclick={this.agree.bind(this)} loading={this.submit_loading}>\n                      {app.translator.trans('foskym-oauth-center.forum.authorize.agree')}\n                    </Button>\n                  </div>\n                </form>\n\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  deny(e) {\n    this.is_authorized = false;\n  }\n  agree(e) {\n    this.is_authorized = true;\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n    this.submit_loading = true;\n    if (app.forum.attribute('foskym-oauth-center.authorization_method_fetch')) {\n      app.request({\n        method: 'POST',\n        url: '/oauth/authorize/fetch',\n        body: {\n          response_type: this.params.response_type,\n          client_id: this.params.client_id,\n          redirect_uri: this.params.redirect_uri,\n          state: this.params.state,\n          scope: this.params.scope,\n          is_authorized: this.is_authorized,\n        }\n      }).then((params) => {\n        window.location.href = params.location;\n      });\n    } else {\n      e.target.submit();\n    }\n  }\n}\n","import UserPage from 'flarum/forum/components/UserPage';\nexport default class AuthorizedPage extends UserPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loadUser(m.route.param('username'));\n  }\n  content() {\n    return (\n      <div className=\"AuthorizedPage\">\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport {extend} from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport AuthorizePage from \"./components/oauth/AuthorizePage\";\nimport AuthorizedPage from \"./components/user/AuthorizedPage\";\napp.initializers.add('foskym/flarum-oauth-center', () => {\n  app.routes['oauth.authorize'] = {\n    path: '/oauth/authorize',\n    component: AuthorizePage\n  };\n\n  app.routes['user.authorized'] = {\n    path: '/u/:username/authorized',\n    component: AuthorizedPage\n  };\n  extend(UserPage.prototype, 'navItems', function (items) {\n    if (app.session.user && app.session.user.id() === this.user.id()) {\n      // items.add(\n      //   'authorized',\n      //   LinkButton.component(\n      //     {\n      //       href: app.route('user.authorized', { username: this.user.username() }),\n      //       icon: 'fas fa-user-friends',\n      //     },\n      //     [\n      //       app.translator.trans('foskym-oauth-center.forum.page.label.authorized'),\n      //     ]\n      //   ),\n      //   -110\n      // );\n    }\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","Client","_Model","_this","_len","arguments","length","args","Array","_key","apply","concat","client_id","Model","client_secret","redirect_uri","grant_types","scope","user_id","client_name","client_icon","client_desc","client_home","Scope","resource_path","method","is_default","scope_name","scope_icon","scope_desc","Extend","add","ScopeComponent","_Component","view","_this$attrs","this","attrs","client","m","class","indexOf","style","src","replace","app","user","attribute","Component","AuthorizePage","_IndexPage","params","scopes","client_scope","loading","is_authorized","submit_loading","_proto","oninit","vnode","_this2","setTimeout","show","LogInModal","route","param","response_type","Promise","all","find","then","_ref","uris","split","includes","state","set","scopes_temp","default_scopes","filter","map","index","redraw","setTitle","extractText","trans","_this3","LoadingIndicator","className","href","target","alt","Tooltip","text","scope_info","s","id","action","onsubmit","type","name","Button","onclick","deny","agree","e","preventDefault","url","body","window","location","submit","IndexPage","AuthorizedPage","_UserPage","loadUser","content","UserPage","path","component","extend","items"],"sourceRoot":""}